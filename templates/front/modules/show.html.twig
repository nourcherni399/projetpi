{% extends 'layouts/user.html.twig' %}

{% block title %}{{ module.titre }} - AutiCare{% endblock %}

{% block user_content %}
<div class="mb-6">
    <a href="{{ path('user_modules') }}" class="inline-flex items-center gap-2 text-[#6B7280] hover:text-[#A7C7E7] focus:outline focus:ring-2 focus:ring-[#A7C7E7] rounded-lg text-sm font-medium">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Retour aux modules
    </a>
</div>

{% for message in app.flashes('success') %}
    <div class="mb-6 px-4 py-3 rounded-lg bg-emerald-50 border border-emerald-200 text-emerald-800">{{ message }}</div>
{% endfor %}

{% for message in app.flashes('error') %}
    <div class="mb-6 px-4 py-3 rounded-lg bg-red-50 border border-red-200 text-red-800">{{ message }}</div>
{% endfor %}

<div class="bg-white rounded-xl border border-[#E5E0D8] p-6 md:p-8 mb-8">
    <header class="mb-8">
        <div class="flex items-center gap-4 mb-4">
            <span class="inline-block px-3 py-1 rounded-lg bg-[#A7C7E7]/30 text-[#4B5563] text-sm font-medium">{{ module.niveau|capitalize }}</span>
            {% if module.categorie %}
                <span class="inline-block px-3 py-1 rounded-lg bg-[#95d7b5]/30 text-[#4B5563] text-sm font-medium">
                    {{ module.categorie.label() }}
                </span>
            {% endif %}
        </div>
        <h1 class="text-3xl font-bold text-[#4B5563] mb-3">{{ module.titre }}</h1>
        {% if module.dateCreation %}
            <p class="text-[#6B7280] text-sm">Publié le {{ module.dateCreation|date('d/m/Y') }}</p>
        {% endif %}
    </header>

    {% if module.image %}
        <div class="mb-8">
            <img src="{{ asset(module.image) }}" alt="{{ module.titre }}" class="rounded-lg max-w-full h-auto">
        </div>
    {% endif %}

    <div class="prose prose-[#4B5563] max-w-none">
        <h2 class="text-xl font-semibold text-[#4B5563] mb-3">Description</h2>
        <p class="text-[#6B7280] mb-6">{{ module.description }}</p>
        
        <h2 class="text-xl font-semibold text-[#4B5563] mb-3">Contenu</h2>
        <div class="text-[#4B5563] whitespace-pre-wrap">{{ module.contenu }}</div>
    </div>
</div>

<div class="flex gap-4">
    <a href="{{ path('user_modules') }}" class="px-5 py-2.5 rounded-lg border border-[#E5E0D8] text-[#6B7280] font-medium hover:bg-[#F5F1EB] focus:outline focus:ring-2 focus:ring-[#A7C7E7]">
        Retour à la liste
    </a>
    <a href="{{ path('user_module_edit', {'id': module.id}) }}" class="px-5 py-2.5 rounded-lg bg-[#A7C7E7] text-white font-medium hover:bg-[#B8D4ED] focus:outline focus:ring-2 focus:ring-[#A7C7E7]">
        Modifier
    </a>
    <form method="post" action="{{ path('user_module_delete', {'id': module.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce module ?');" class="inline">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ module.id) }}">
        <button type="submit" class="px-5 py-2.5 rounded-lg bg-red-50 text-red-600 font-medium hover:bg-red-100 focus:outline focus:ring-2 focus:ring-red-500">
            Supprimer
        </button>
    </form>
</div>
{% endblock %}
