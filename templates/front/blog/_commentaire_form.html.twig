{# templates/front/blog/_commentaire_form.html.twig #}

{% if app.user %}
    <div class="bg-white rounded-xl border border-[#E5E0D8] p-6 mb-6">
        <h3 class="text-lg font-semibold text-[#4B5563] mb-4">Laisser un commentaire</h3>
        {{ form_start(commentaireForm, {
            'action': path('commentaire_ajouter', {'blogId': article.id}),
            'method': 'POST',
            'attr': {'class': 'space-y-4'}
        }) }}
        
        {{ form_errors(commentaireForm) }}
        
        <div>
            {{ form_widget(commentaireForm.contenu, {
                'attr': {
                    'placeholder': 'Partagez votre expérience ou votre avis...',
                    'class': 'w-full px-4 py-3 border border-[#E5E0D8] rounded-lg focus:ring-2 focus:ring-[#A7C7E7] focus:border-transparent resize-none',
                    'rows': 4
                }
            }) }}
            {{ form_errors(commentaireForm.contenu) }}
        </div>
        
        <div class="flex items-center justify-between">
            <div class="text-sm text-[#6B7280]">
                Commenté en tant que <span class="font-medium text-[#4B5563]">{{ app.user.nom }} {{ app.user.prenom }}</span>
            </div>
            <button type="submit" class="px-6 py-2.5 bg-[#A7C7E7] text-white font-medium rounded-lg hover:bg-[#B8D4ED] focus:outline focus:ring-2 focus:ring-[#A7C7E7] transition-colors">
                Publier le commentaire
            </button>
        </div>
        
        {{ form_end(commentaireForm) }}
    </div>
{% else %}
    <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 mb-6">
        <div class="flex items-center gap-3 mb-3">
            <svg class="w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
            <h3 class="text-lg font-semibold text-blue-900">Connectez-vous pour commenter</h3>
        </div>
        <p class="text-blue-700 mb-4">Pour laisser un commentaire, veuillez vous connecter à votre compte.</p>
        <div class="flex gap-3">
            <a href="{{ path('app_login') }}" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors">
                Se connecter
            </a>
            <a href="{{ path('register') }}" class="px-4 py-2 border border-blue-600 text-blue-600 font-medium rounded-lg hover:bg-blue-50 transition-colors">
                Créer un compte
            </a>
        </div>
    </div>
{% endif %}
