{% extends 'layouts/doctor.html.twig' %}

{% block title %}Modifier la note - AutiCare Médecin{% endblock %}

{% block doctor_content %}
<div class="space-y-6">
    <div class="flex items-center gap-4">
        <a href="{{ path('doctor_notes') }}" class="inline-flex items-center gap-2 text-[#6B7280] hover:text-[#A7C7E7] focus:outline focus:ring-2 focus:ring-[#A7C7E7] rounded-lg">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
            Retour aux notes
        </a>
    </div>

    {% for message in app.flashes('error') %}
        <div class="px-4 py-3 rounded-lg bg-red-50 border border-red-200 text-red-800">{{ message }}</div>
    {% endfor %}

    <div class="bg-white rounded-2xl border border-[#E5E0D8] shadow-lg overflow-hidden">
        <div class="p-6 border-b border-[#E5E0D8] bg-gradient-to-r from-[#A7C7E7]/10 to-transparent">
            <h1 class="text-2xl font-bold text-[#4B5563]">Modifier la note</h1>
            <p class="text-[#6B7280] text-sm mt-1">Modifiez le contenu de la note (min. 3 caractères, max. 5000).</p>
        </div>
        <div class="p-6">
            {{ form_start(form, { attr: { class: 'space-y-4', 'data-turbo': 'false', novalidate: 'novalidate' }, label_attr: { class: 'block text-[#4B5563] font-medium mb-1' } }) }}
            {{ form_errors(form) }}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    {{ form_label(form.patient) }}
                    {{ form_widget(form.patient, { 'attr': { 'class': 'mt-1 block w-full rounded-lg border border-[#E5E0D8] bg-white px-4 py-2.5 text-[#4B5563] focus:outline focus:ring-2 focus:ring-[#A7C7E7]' } }) }}
                    {{ form_errors(form.patient) }}
                </div>
                <div class="md:col-span-2">
                    {{ form_label(form.contenu) }}
                    {{ form_widget(form.contenu, { 'attr': { 'class': 'mt-1 block w-full rounded-lg border border-[#E5E0D8] bg-white px-4 py-2.5 text-[#4B5563] focus:outline focus:ring-2 focus:ring-[#A7C7E7]', 'rows': 6 } }) }}
                    {{ form_errors(form.contenu) }}
                </div>
            </div>
            <div class="flex flex-wrap gap-2 pt-4">
                <button type="submit" class="px-4 py-2 rounded-lg bg-[#A7C7E7] text-white font-medium hover:bg-[#B8D4ED] focus:outline focus:ring-2 focus:ring-[#A7C7E7]">Enregistrer les modifications</button>
                <a href="{{ path('doctor_note_show', { id: note.id }) }}" class="px-4 py-2 rounded-lg border border-[#E5E0D8] text-[#4B5563] font-medium hover:bg-[#F5F1EB] focus:outline focus:ring-2 focus:ring-[#A7C7E7]">Annuler</a>
            </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}
